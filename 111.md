# 第二章：核心硬件简介

本章所说的核心硬件指的是CPU、内存、主板等硬件，用户很难对这些硬件的工作状况进行调整，但了解其工作机理对装机、硬件升级、硬件故障排除都是有益的。

### 32位和64位的CPU到底有什么差别

32位和64位CPU的区别在于CPU的字长是32bit还是64bit。在CPU的指令中可以分为两大块，一部分是指令、一部分是数据，打个比方（并不合适）前者好比加减乘除等运算符后者就是要用来计算的数据了。所谓CPU的字长指的是CPU的指令和数据按照二进制方式书写时的位数，比如32位CPU的指令由32位二进制数组成。CPU的字长越长那么同时处理的数据也就越多，理论上性能也就越强。按照CPU的字长，可以将CPU分为三种：

**纯64位CPU**

如Intel的安腾。这类CPU内所有的指令和数据都是64位的，因此纯64位的CPU是不能兼容32位程序的。

**混合64位CPU**

如intel Core，AMD ryzen等。这些CPU的指令字长和数据字长不一样，比如32位指令+64位数据，这样可以方便兼容32位程序，而且在实际使用中已经证明纯64位CPU的性能不一定要高于混合32位，采用混合指令可能是更优选择。

**纯32位CPU**

这类CPU内所有的指令和数据都是32位的，这类CPU已经很难买到了，基本上不予考虑。

### CPU与最大内存的关系

网上有不少资料都认为最大内存寻址数量是32位和64位CPU的差别，其实这是不太对的。对于纯32位CPU来说，由于数据指令只有32位所以理论上CPU只能最大寻获4GB内存（2的32次方），但是64位CPU也不见得是2的64次方，实际上目前大多数的64位CPU内存寻址宽度都只有2的40次方左右。即使是使用64位的CPU也要配合适当的操作系统才能完整的使用超过4GB内存。而32位的CPU也可以通过一些其他技术手段支持超过4GB的内存限制。

### CPU最大误区：主频

几乎所有的小白看CPU都是直接看主频的，很多人下意识的认为CPU的主频就是CPU的运算速度，这是一个非常严重的误区。为了理解CPU主频这个概念，我们需要把CPU简化成一个逻辑电路，这里面有一大堆的运算组件，大家按顺序工作，和流水线类似，比如第一秒谁谁谁干啥，第二秒谁谁谁又干什么，保证整体工作的顺序是正确的。

但是CPU里是没有时钟这个东西，电子元件也不会自己看时间，为了保证他们能按顺序同步工作CPU需要一个统一的信号来表调度这些元器件，类似于做体操的时候一令一动，这个信号就是**主频**。主频其实就是按01010变化的一个周期信号，每完成一个周期的变化叫做一个时钟周期，CPU内的一切动作都是按时钟周期来同步的。

显然，当信号变快的时候（主频提高）CPU内的器件就都动作快了，性能也就提高了，这也是人多唯主频论的基本理念。但是凡事都不是那么简单的，如果时钟周期调的太快那么留给元器件的反应时间就太短了，最终导致CPU频发出错，变得不稳定；频率更高会进一步导致CPU整体工作混乱，此时CPU就不再工作了。

此外，CPU内的基本组件是晶体管，晶体管的发热与交变电流的频率的平方成正比，也就是说理论上主频高了一倍发热要高4倍。而高温和高频都会导致晶体管的感抗（理解为电阻）大幅度增加，CPU需要更高的电压才能维持工作电流，这反过来又会提高功率，进入恶性循环中。

### 主频只有在相同架构下才有可比性

其实上面说的都不算是根本原因，根本原因是CPU内不一定是一个时钟周期执行一个动作，每个动作的质量也不一样。比如说，有个CPU主频是1GHz但是一个指令只要1个周期就能完成；另一个主频是2GHz但是一个指令要10个周期才能完成，这时前者的效率要远高于后者。更不用说每一个指令的内容也不一样了，举个例子加法是一种指令，乘方也是，如果一个CPU算加法特别快但是不会乘方那你算一个10的10次方怕是要到地老天荒。

现代CPU的设计中影响主频的主要是发热和稳定性，性能则主要通过CPU设计来体现，只有在CPU同属于相同一系设计的时候比较主频才有意义。

